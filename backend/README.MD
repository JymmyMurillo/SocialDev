# =====================================================
# SocialDev Backend
# =====================================================
# Este documento lista TODOS los archivos que deben existir en el backend

## ğŸ“ Estructura Completa del Backend

```
backend/
â”œâ”€â”€ ğŸ“„ package.json                           
â”œâ”€â”€ ğŸ“„ tsconfig.json                          
â”œâ”€â”€ ğŸ“„ nest-cli.json                          
â”œâ”€â”€ ğŸ“„ Dockerfile                             
â”œâ”€â”€ ğŸ“„ .dockerignore                          
â”œâ”€â”€ ğŸ“„ .env                                   âš ï¸  Debes crear manualmente
â”‚
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ ğŸ“„ schema.prisma                      
â”‚   â””â”€â”€ ğŸ“„ seed.ts                            
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ ğŸ“„ main.ts                            
    â”œâ”€â”€ ğŸ“„ app.module.ts                      
    â”œâ”€â”€ ğŸ“„ app.controller.ts                  
    â”œâ”€â”€ ğŸ“„ app.service.ts                     
    â”‚
    â”œâ”€â”€ prisma/
    â”‚   â”œâ”€â”€ ğŸ“„ prisma.service.ts              
    â”‚   â””â”€â”€ ğŸ“„ prisma.module.ts               
    â”‚
    â”œâ”€â”€ auth/
    â”‚   â”œâ”€â”€ dto/
    â”‚   â”‚   â””â”€â”€ ğŸ“„ login.dto.ts               
    â”‚   â”œâ”€â”€ entities/
    â”‚   â”‚   â””â”€â”€ ğŸ“„ auth-response.entity.ts    
    â”‚   â”œâ”€â”€ guards/
    â”‚   â”‚   â””â”€â”€ ğŸ“„ jwt-auth.guard.ts          
    â”‚   â”œâ”€â”€ strategies/
    â”‚   â”‚   â””â”€â”€ ğŸ“„ jwt.strategy.ts            
    â”‚   â”œâ”€â”€ ğŸ“„ auth.controller.ts             
    â”‚   â”œâ”€â”€ ğŸ“„ auth.service.ts                
    â”‚   â””â”€â”€ ğŸ“„ auth.module.ts                 
    â”‚
    â”œâ”€â”€ posts/
    â”‚   â”œâ”€â”€ dto/
    â”‚   â”‚   â””â”€â”€ ğŸ“„ create-post.dto.ts         
    â”‚   â”œâ”€â”€ entities/
    â”‚   â”‚   â””â”€â”€ ğŸ“„ post.entity.ts             
    â”‚   â”œâ”€â”€ ğŸ“„ posts.controller.ts            
    â”‚   â”œâ”€â”€ ğŸ“„ posts.service.ts               
    â”‚   â””â”€â”€ ğŸ“„ posts.module.ts                
    â”‚
    â”œâ”€â”€ users/
    â”‚   â”œâ”€â”€ entities/
    â”‚   â”‚   â””â”€â”€ ğŸ“„ user.entity.ts             
    â”‚   â”œâ”€â”€ ğŸ“„ users.controller.ts            
    â”‚   â”œâ”€â”€ ğŸ“„ users.service.ts               
    â”‚   â””â”€â”€ ğŸ“„ users.module.ts                
    â”‚
    â””â”€â”€ common/
        â””â”€â”€ decorators/
            â””â”€â”€ ğŸ“„ get-user.decorator.ts      
```

## âš ï¸ Archivo Faltante que DEBES crear:

### backend/.env

Crea este archivo manualmente en la carpeta `backend/` con el siguiente contenido:

```env
# Base de Datos
DATABASE_URL="postgresql://socialdev:socialdev123@localhost:5432/socialdev_db?schema=public"

# JWT
JWT_SECRET="mi-super-secreto-cambiar-en-produccion-123456"
JWT_EXPIRES_IN="24h"

# Puerto
PORT=3000

# Entorno
NODE_ENV=development
```

## ğŸ“ Pasos Siguientes

### 1. Verificar que tienes todos los archivos

Abre VS Code en la carpeta `backend/` y verifica que la estructura de carpetas coincida con la de arriba.

### 2. Crear el archivo .env

```bash
# Desde la carpeta backend/
cd backend

# Crear archivo .env (Windows PowerShell)
New-Item -Path .env -ItemType File

# O crear manualmente:
# Clic derecho en backend/ â†’ New File â†’ .env
```

Copia el contenido del .env de arriba.

### 3. Instalar dependencias

```bash
# AsegÃºrate de estar en backend/
npm install
```

Esto instalarÃ¡ todos los paquetes necesarios (puede tardar 2-5 minutos).

### 4. Generar Prisma Client

```bash
npx prisma generate
```

Esto genera el cliente de Prisma basado en `schema.prisma`.

### 5. Verificar que no hay errores de TypeScript

```bash
npm run build
```

Si todo estÃ¡ bien, deberÃ­as ver:
```
Successfully compiled X files with swc
```

Si hay errores, revisa que todos los archivos estÃ©n en su lugar.

### 6. (Opcional) Ejecutar sin Docker

Si quieres probar el backend sin Docker:

```bash
# Levantar PostgreSQL con Docker (solo la BD)
docker run -d \
  --name socialdev-postgres \
  -e POSTGRES_USER=socialdev \
  -e POSTGRES_PASSWORD=socialdev123 \
  -e POSTGRES_DB=socialdev_db \
  -p 5432:5432 \
  postgres:15-alpine

# Ejecutar migraciones
npx prisma migrate dev --name init

# Ejecutar seeder
npx prisma db seed

# Iniciar backend en modo desarrollo
npm run start:dev
```

DeberÃ­as ver:
```
[Nest] INFO [NestFactory] Starting Nest application...
[Nest] INFO [InstanceLoader] PrismaModule dependencies initialized
...
âœ… ConexiÃ³n a PostgreSQL establecida correctamente
ğŸš€ SocialDev Backend API estÃ¡ corriendo!
ğŸ“¡ Servidor: http://localhost:3000
ğŸ“š DocumentaciÃ³n Swagger: http://localhost:3000/api
```

### 7. Probar un endpoint

Abre tu navegador o Postman:

```
GET http://localhost:3000/api/health
```

DeberÃ­as ver:
```json
{
  "status": "ok",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "service": "SocialDev API",
  "version": "1.0.0"
}
```

## ğŸ› SoluciÃ³n de Problemas

### Error: "Cannot find module '@nestjs/common'"

**SoluciÃ³n:**
```bash
cd backend
rm -rf node_modules package-lock.json
npm install
```

### Error: "DATABASE_URL environment variable not found"

**SoluciÃ³n:** AsegÃºrate de que existe el archivo `.env` en `backend/` con `DATABASE_URL`.

### Error: "Port 3000 is already in use"

**SoluciÃ³n:** Otro servicio estÃ¡ usando el puerto 3000. Cambia el puerto en `.env`:
```env
PORT=3001
```